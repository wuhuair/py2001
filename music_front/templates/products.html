{% extends "template.html" %}
{% block main %}

<link href="/static/css/form.css" rel="stylesheet" type="text/css" media="all" />
<!-- the jScrollPane script -->
<script type="text/javascript" src="/static/js/jquery.jscrollpane.min.js"></script>
		<script type="text/javascript" id="sourcecode">
			$(function()
			{
				$('.scroll-pane').jScrollPane();
			});
		</script>
<!-- //the jScrollPane script -->
<script type="text/javascript" src="/static/js/jquery.mousewheel.js"></script>
<!-- the mousewheel plugin -->

	<!--products-->
	<div class="products">
		<div class="container">
			<h2>Our Products</h2>
			<div class="col-md-9 product-model-sec" id="mydata">
                {% for middle in middles %}
				<div class="product-grid">
					<a href="/single?id={{ middle.p_id.p_id }}">
						<div class="more-product"><span> </span></div>
						<div class="product-img b-link-stripe b-animate-go  thickbox">
							<img src="http://127.0.0.1:8000/static{{ middle.p_id.p_imgs }}" class="img-responsive" alt="" style="width:250px;height:200px;">
							<div class="b-wrapper">
								<h4 class="b-animate b-from-left  b-delay03">
									<button>查看</button>
								</h4>
							</div>
						</div>
					</a>
					<div class="product-info simpleCart_shelfItem">
						<div class="product-info-cust prt_name">
							<h4>{{ middle.p_id.p_name }}</h4>
							<span class="item_price">{{ middle.p_id.p_sale_prict }}元/个</span>
							<div class="ofr">
								<p class="pric1"><del>{{ middle.p_id.p_cost_price }}元/个</del></p>
{#								<p class="disc">[15% Off]</p>#}
							</div>
{#							<input id="count" type="text" class="item_quantity" value="1" />#}
                            <p>1个</p>
							<input type="button" class="item_add items" value="加到购物车" onclick="addCart('{{ middle.p_id.p_id }}','{{ middle.p_id.p_sale_prict }}')">
							<div class="clearfix"> </div>
						</div>
					</div>
				</div>

                {% endfor %}

            <div style="margin-left: 350px" id="loadmorediv">
                <a href="javascript:;" onclick="loadmore('{{ spt_id }}','{{ m_use }}')" id="loadmore">{{ loadmore }}</a>
            </div>
			</div>
			<div class="col-md-3 rsidebar span_1_of_left">

{#				<section  class="sky-form">#}
{#					<h4><span class="glyphicon glyphicon-minus" aria-hidden="true"></span>尺寸</h4>#}
{#					<div class="row row1 scroll-pane">#}
{#						<div class="col col-4">#}
{#							<label class="checkbox" onclick="FindProductsBySize('6','{{ spt_id }}','{{ m_use }}')"><input type="checkbox" name="checkbox"><i></i>6寸</label>#}
{#							<label class="checkbox" onclick="FindProductsBySize('8','{{ spt_id }}','{{ m_use }}')"><input type="checkbox" name="checkbox"><i></i>8寸</label>#}
{#							<label class="checkbox" onclick="FindProductsBySize('10','{{ spt_id }}','{{ m_use }}')"><input type="checkbox" name="checkbox"><i></i>10寸</label>#}
{#							<label class="checkbox" onclick="FindProductsBySize('12','{{ spt_id }}','{{ m_use }}')"><input type="checkbox" name="checkbox"><i></i>12寸</label>#}
{#							<label class="checkbox" onclick="FindProductsBySize('14','{{ spt_id }}','{{ m_use }}')"><input type="checkbox" name="checkbox"><i></i>14寸</label>#}
{#							<label class="checkbox" onclick="FindProductsBySize('16','{{ spt_id }}','{{ m_use }}')"><input type="checkbox" name="checkbox"><i></i>16寸</label>#}
{#							<label class="checkbox" onclick="FindProductsBySize('18','{{ spt_id }}','{{ m_use }}')"><input type="checkbox" name="checkbox"><i></i>18寸以上</label>#}
{#						</div>#}
{#					</div>#}
{#				</section>#}
{#				<section  class="sky-form">#}
{#					<h4><span class="glyphicon glyphicon-minus" aria-hidden="true"></span>Price</h4>#}
{#					<ul class="dropdown-menu1">#}
{#						<li><a href="">#}
{#							<div id="slider-range"></div>#}
{#							<input type="text" id="amount" style="border: 0; font-weight: NORMAL;   font-family: 'Dosis-Regular';" />#}
{#							</a></li>#}
{#					</ul>#}
{#				</section>#}
				<!---->
				<script type="text/javascript" src="/static/js/jquery-ui.min.js"></script>
				<link rel="stylesheet" type="text/css" href="/static/css/jquery-ui.css">
{#					<script type='text/javascript'>//<![CDATA[#}
{#						$(window).load(function(){#}
{#						 $( "#slider-range" ).slider({#}
{#									range: true,#}
{#									min: 0,#}
{#									max: 100000,#}
{#									values: [ 500, 100000 ],#}
{#									slide: function( event, ui ) {  $( "#amount" ).val( "$" + ui.values[ 0 ] + " - $" + ui.values[ 1 ] );#}
{#									}#}
{#						 });#}
{#						$( "#amount" ).val( "$" + $( "#slider-range" ).slider( "values", 0 ) + " - $" + $( "#slider-range" ).slider( "values", 1 ) );#}
{##}
{#						});//]]>#}
{#					</script>#}
				<!---->
				<section  class="sky-form">
					<h4><span class="glyphicon glyphicon-minus" aria-hidden="true"></span>价钱</h4>
					<div class="row row1 scroll-pane">
						<div class="col col-4">
							<label class="checkbox" onclick="FindProductsByPrict('0','100','{{ spt_id }}','{{ m_use }}')"><input type="radio" name="checkbox"><i></i>0-100</label>
							<label class="checkbox" onclick="FindProductsByPrict('100','300','{{ spt_id }}','{{ m_use }}')"><input type="radio" name="checkbox"><i></i>100-300</label>
							<label class="checkbox" onclick="FindProductsByPrict('300','600','{{ spt_id }}','{{ m_use }}')"><input type="radio" name="checkbox"><i></i>300-600</label>
							<label class="checkbox" onclick="FindProductsByPrict('600','1000','{{ spt_id }}','{{ m_use }}')"><input type="radio" name="checkbox"><i></i>600-1000</label>
							<label class="checkbox" onclick="FindProductsByPrict('1000','99999','{{ spt_id }}','{{ m_use }}')"><input type="radio" name="checkbox"><i></i>1000以上</label>
						</div>
					</div>
				</section>
			</div>
        <script>
            function FindProductsByPrict(prict1,prict2,spt_id,m_use){
                $.ajax({
                    type:"get",
                    url:"FindProductsByPrict?prict1="+prict1+"&prict2="+prict2+"&spt_id="+spt_id+"&m_use="+m_use,
                    dataType:"json",
                    success:function (data) {
                            $("#mydata").empty();
                            var arr = eval(data["product_items"]);
                            var str = "";
                            for(var i in arr){
                                str += "<div class=\"product-grid\">\n" +
                                        "\t\t\t\t\t<a href=\"/single?id="+arr[i]["p_id"]+"\">\n" +
                                        "\t\t\t\t\t\t<div class=\"more-product\"><span> </span></div>\n" +
                                        "\t\t\t\t\t\t<div class=\"product-img b-link-stripe b-animate-go  thickbox\">\n" +
                                        "\t\t\t\t\t\t\t<img src=\"http://127.0.0.1:8000/static"+arr[i]["p_imgs"]+"\" class=\"img-responsive\" alt=\"\" style=\"width:250px;height:200px;\">\n" +
                                        "\t\t\t\t\t\t\t<div class=\"b-wrapper\">\n" +
                                        "\t\t\t\t\t\t\t\t<h4 class=\"b-animate b-from-left  b-delay03\">\n" +
                                        "\t\t\t\t\t\t\t\t\t<button>查看</button>\n" +
                                        "\t\t\t\t\t\t\t\t</h4>\n" +
                                        "\t\t\t\t\t\t\t</div>\n" +
                                        "\t\t\t\t\t\t</div>\n" +
                                        "\t\t\t\t\t</a>\n" +
                                        "\t\t\t\t\t<div class=\"product-info simpleCart_shelfItem\">\n" +
                                        "\t\t\t\t\t\t<div class=\"product-info-cust prt_name\">\n" +
                                        "\t\t\t\t\t\t\t<h4>"+arr[i]["p_name"]+"</h4>\n" +
                                        "\t\t\t\t\t\t\t<span class=\"item_price\">"+arr[i]["p_sale_prict"]+"元/个</span>\n" +
                                        "\t\t\t\t\t\t\t<div class=\"ofr\">\n" +
                                        "\t\t\t\t\t\t\t\t<p class=\"pric1\"><del>"+arr[i]["p_sale_prict"]+"元/个</del></p>\n" +
                                        "{#\t\t\t\t\t\t\t\t<p class=\"disc\">[15% Off]</p>#}\n" +
                                        "\t\t\t\t\t\t\t</div>\n" +
                                        "\t\t\t\t\t\t\t<p>1个</p>\n" +
                                        "\t\t\t\t\t\t\t<input type=\"button\" class=\"item_add items\" value=\"加到购物车\" onclick=\"addCart(\'"+arr[i]["p_id"]+"\',\'"+arr[i]["p_sale_prict"]+"\')\">\n" +
                                        "\t\t\t\t\t\t\t<div class=\"clearfix\"> </div>\n" +
                                        "\t\t\t\t\t\t</div>\n" +
                                        "\t\t\t\t\t</div>\n" +
                                        "\t\t\t\t</div>";
                                        $("#loadmorediv").remove();
                            }
                                        $("#mydata").append(str);
                    }
                })
            }
        </script>
			<div class="clearfix"> </div>
		</div>
	</div>
	<!--//products-->
<script>
var page = 2;
function loadmore(spt_id,m_use) {
    var lm = $("#loadmore").html();
    if(lm == "加载更多..."){
        $.ajax({
            type:"get",
            url:"products_ajax?page="+page+"&spt_id="+spt_id+"&m_use="+m_use,
            dataType:"json",
            success:function(data){
                page += 1;
                arr = eval(data["product_items"]);
                var item = "";
                for(var i in arr){
                        item += "<div class=\"product-grid\">\n" +
                        "\t\t\t\t\t<a href=\"/single?id=\"+arr[i][\"p_id\"]+\">\n" +
                        "\t\t\t\t\t\t<div class=\"more-product\"><span> </span></div>\n" +
                        "\t\t\t\t\t\t<div class=\"product-img b-link-stripe b-animate-go  thickbox\">\n" +
                        "\t\t\t\t\t\t\t<img src=\"http://127.0.0.1:8000/static"+arr[i]["p_imgs"]+"\" class=\"img-responsive\" alt=\"\" style=\"width:250px;height:200px;\">\n" +
                        "\t\t\t\t\t\t\t<div class=\"b-wrapper\">\n" +
                        "\t\t\t\t\t\t\t\t<h4 class=\"b-animate b-from-left  b-delay03\">\n" +
                        "\t\t\t\t\t\t\t\t\t<button>查看</button>\n" +
                        "\t\t\t\t\t\t\t\t</h4>\n" +
                        "\t\t\t\t\t\t\t</div>\n" +
                        "\t\t\t\t\t\t</div>\n" +
                        "\t\t\t\t\t</a>\n" +
                        "\t\t\t\t\t<div class=\"product-info simpleCart_shelfItem\">\n" +
                        "\t\t\t\t\t\t<div class=\"product-info-cust prt_name\">\n" +
                        "\t\t\t\t\t\t\t<h4>"+arr[i]["p_name"]+"</h4>\n" +
                        "\t\t\t\t\t\t\t<span class=\"item_price\">"+arr[i]["p_sale_prict"]+"元/个</span>\n" +
                        "\t\t\t\t\t\t\t<div class=\"ofr\">\n" +
                        "\t\t\t\t\t\t\t\t<p class=\"pric1\"><del>"+arr[i]["p_sale_prict"]+"元/个</del></p>\n" +
                        "{#\t\t\t\t\t\t\t\t<p class=\"disc\">[15% Off]</p>#}\n" +
                        "\t\t\t\t\t\t\t</div>\n" +
                        "\t\t\t\t\t\t\t<p>1个</p>\n" +
                        "\t\t\t\t\t\t\t<input type=\"button\" class=\"item_add items\" value=\"加到购物车\" onclick=\"addCart(\'"+arr[i]["p_id"]+"\',\'"+arr[i]["p_sale_prict"]+"\')\">\n" +
                        "\t\t\t\t\t\t\t<div class=\"clearfix\"> </div>\n" +
                        "\t\t\t\t\t\t</div>\n" +
                        "\t\t\t\t\t</div>\n" +
                        "\t\t\t\t</div>";
                        $("#loadmorediv").remove();
                }
                var load = "<div style=\"margin-left: 350px\" id=\"loadmorediv\">\n" +
                        "<a href=\"javascript:;\" onclick=\"loadmore('"+data["spt_id"]+"','"+data["m_use"]+"')\" id=\"loadmore\">"+data["loadmore"]+"</a>\n" +
                        "</div>";
                $("#mydata").append(item);
                $("#mydata").append(load);
            }
        })
    }
}
</script>
<script>
                function addCart(pid,prict) {
                    var count = 1;
                    window.location.href = "/addcart?pid="+pid+"&prict="+prict+"&count="+count;
                }
</script>
{% endblock %}